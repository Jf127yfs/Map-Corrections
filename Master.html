<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Project Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --bg: #000;
      --fg: #0f0;
      --accent: #ff0;
      --panel: #0a0a0a;
      --border: #0f0;
      --nav-width: 250px;
      --header-height: 60px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background: var(--bg);
      color: var(--fg);
      font-family: 'Courier New', monospace;
      overflow: hidden;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Header */
    .header {
      height: var(--header-height);
      background: var(--panel);
      border-bottom: 2px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 20px;
      z-index: 1000;
    }

    .header-title {
      font-size: 18px;
      letter-spacing: 4px;
      color: var(--fg);
      text-shadow: 0 0 10px var(--fg);
    }

    .header-controls {
      display: flex;
      gap: 15px;
      align-items: center;
    }

    .header-btn {
      background: transparent;
      color: var(--fg);
      border: 1px solid var(--fg);
      padding: 6px 12px;
      font: 10px 'Courier New', monospace;
      cursor: pointer;
      letter-spacing: 1px;
      transition: all 0.2s;
      text-transform: uppercase;
    }

    .header-btn:hover {
      background: var(--fg);
      color: #000;
      box-shadow: 0 0 10px var(--fg);
    }

    /* Main Container */
    .main-container {
      display: flex;
      flex: 1;
      overflow: hidden;
    }

    /* Sidebar Navigation */
    .sidebar {
      width: var(--nav-width);
      background: var(--panel);
      border-right: 2px solid var(--border);
      overflow-y: auto;
      transition: transform 0.3s;
    }

    .sidebar.collapsed {
      transform: translateX(calc(-1 * var(--nav-width)));
    }

    .nav-section {
      padding: 20px 0;
      border-bottom: 1px solid var(--border);
    }

    .nav-title {
      padding: 0 20px 10px;
      font-size: 11px;
      color: var(--accent);
      letter-spacing: 2px;
      text-transform: uppercase;
    }

    .nav-item {
      display: flex;
      align-items: center;
      padding: 12px 20px;
      color: var(--fg);
      text-decoration: none;
      font-size: 12px;
      letter-spacing: 1px;
      transition: all 0.2s;
      cursor: pointer;
      border-left: 3px solid transparent;
    }

    .nav-item:hover {
      background: rgba(0, 255, 0, 0.1);
      border-left-color: var(--fg);
    }

    .nav-item.active {
      background: rgba(0, 255, 0, 0.15);
      border-left-color: var(--accent);
      color: var(--accent);
    }

    .nav-item-icon {
      margin-right: 10px;
      font-size: 14px;
    }

    /* Content Area */
    .content-area {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .content-header {
      background: var(--panel);
      border-bottom: 2px solid var(--border);
      padding: 12px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .breadcrumb {
      font-size: 11px;
      color: #888;
      letter-spacing: 1px;
    }

    .breadcrumb-item {
      color: var(--fg);
    }

    .page-actions {
      display: flex;
      gap: 10px;
    }

    .action-btn {
      background: transparent;
      color: var(--fg);
      border: 1px solid var(--fg);
      padding: 5px 10px;
      font: 9px 'Courier New', monospace;
      cursor: pointer;
      letter-spacing: 1px;
      transition: all 0.2s;
    }

    .action-btn:hover {
      background: rgba(0, 255, 0, 0.2);
    }

    .content-frame {
      flex: 1;
      border: none;
      background: var(--bg);
    }

    /* Loading State */
    .loading-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      opacity: 1;
      transition: opacity 0.3s;
    }

    .loading-overlay.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .spinner {
      width: 50px;
      height: 50px;
      border: 4px solid #333;
      border-top-color: var(--fg);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Scrollbar Styling */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #000;
    }

    ::-webkit-scrollbar-thumb {
      background: var(--fg);
      border: 1px solid #000;
    }

    /* Responsive */
    @media (max-width: 768px) {
      :root {
        --nav-width: 200px;
      }

      .sidebar {
        position: absolute;
        height: 100%;
        z-index: 999;
        transform: translateX(calc(-1 * var(--nav-width)));
      }

      .sidebar.show {
        transform: translateX(0);
      }

      .header-title {
        font-size: 14px;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <div class="header">
    <div class="header-title">‚óâ PROJECT DASHBOARD ‚óâ</div>
    <div class="header-controls">
      <button class="header-btn" onclick="toggleSidebar()">‚ò∞ MENU</button>
      <button class="header-btn" onclick="openDisplayMode()">üì∫ DISPLAY</button>
      <button class="header-btn" onclick="refreshPage()">‚Üª REFRESH</button>
    </div>
  </div>

  <!-- Main Container -->
  <div class="main-container">
    <!-- Sidebar Navigation -->
    <div class="sidebar" id="sidebar">
      <div class="nav-section">
        <div class="nav-title">‚ñ∏ Main</div>
        <a class="nav-item" data-page="home" onclick="loadPage('home', 'Home')">
          <span class="nav-item-icon">üè†</span>
          <span>Home</span>
        </a>
        <a class="nav-item" data-page="MD" onclick="loadPage('MD', 'Map Visualization')">
          <span class="nav-item-icon">üó∫Ô∏è</span>
          <span>Map Visualization</span>
        </a>
      </div>

      <div class="nav-section">
        <div class="nav-title">‚ñ∏ Analytics</div>
        <a class="nav-item" data-page="dashboard" onclick="loadPage('dashboard', 'Dashboard')">
          <span class="nav-item-icon">üìä</span>
          <span>Dashboard</span>
        </a>
        <a class="nav-item" data-page="reports" onclick="loadPage('reports', 'Reports')">
          <span class="nav-item-icon">üìà</span>
          <span>Reports</span>
        </a>
        <a class="nav-item" data-page="analytics" onclick="loadPage('analytics', 'Analytics')">
          <span class="nav-item-icon">üìâ</span>
          <span>Analytics</span>
        </a>
      </div>

      <div class="nav-section">
        <div class="nav-title">‚ñ∏ Settings</div>
        <a class="nav-item" data-page="settings" onclick="loadPage('settings', 'Settings')">
          <span class="nav-item-icon">‚öôÔ∏è</span>
          <span>Settings</span>
        </a>
        <a class="nav-item" data-page="help" onclick="loadPage('help', 'Help')">
          <span class="nav-item-icon">‚ùì</span>
          <span>Help</span>
        </a>
      </div>
    </div>

    <!-- Content Area -->
    <div class="content-area">
      <div class="content-header">
        <div class="breadcrumb">
          <span>HOME</span> <span style="color: var(--accent);">/</span> <span class="breadcrumb-item" id="currentPage">LOADING</span>
        </div>
        <div class="page-actions">
          <button class="action-btn" onclick="openInNewTab()">‚Üó OPEN IN TAB</button>
          <button class="action-btn" onclick="reloadFrame()">‚Üª RELOAD</button>
        </div>
      </div>

      <!-- Loading Overlay -->
      <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
      </div>

      <!-- Content Frame -->
      <iframe id="contentFrame" class="content-frame" src=""></iframe>
    </div>
  </div>

  <script>
    // State management
    const state = {
      currentPage: null,
      currentTitle: null,
      isLoading: false
    };

    // Get base URL (current script URL without parameters)
    function getBaseUrl() {
      return window.location.href.split('?')[0];
    }

    // Load page in content frame
    function loadPage(page, title) {
      if (state.isLoading) return;

      state.currentPage = page;
      state.currentTitle = title;
      state.isLoading = true;

      // Show loading
      document.getElementById('loadingOverlay').classList.remove('hidden');

      // Update active nav item
      document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
      });
      document.querySelector(`[data-page="${page}"]`)?.classList.add('active');

      // Update breadcrumb
      document.getElementById('currentPage').textContent = title.toUpperCase();

      // Update browser URL without reload
      const newUrl = `${getBaseUrl()}?mode=master&page=${page}`;
      window.history.pushState({ page, title }, title, newUrl);

      // Load page in iframe
      const frame = document.getElementById('contentFrame');
      frame.src = `${getBaseUrl()}?page=${page}`;

      // Hide loading after frame loads
      frame.onload = function() {
        setTimeout(() => {
          document.getElementById('loadingOverlay').classList.add('hidden');
          state.isLoading = false;
        }, 300);
      };

      // Handle load errors
      frame.onerror = function() {
        document.getElementById('loadingOverlay').classList.add('hidden');
        state.isLoading = false;
        alert('Failed to load page: ' + page);
      };
    }

    // Toggle sidebar (for mobile)
    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('show');
    }

    // Refresh current page
    function refreshPage() {
      if (state.currentPage) {
        loadPage(state.currentPage, state.currentTitle);
      }
    }

    // Reload iframe
    function reloadFrame() {
      const frame = document.getElementById('contentFrame');
      frame.src = frame.src;
    }

    // Open current page in new tab
    function openInNewTab() {
      if (state.currentPage) {
        const url = `${getBaseUrl()}?page=${state.currentPage}`;
        window.open(url, '_blank');
      }
    }

    // Open display mode
    function openDisplayMode() {
      const url = `${getBaseUrl()}?mode=display`;
      window.open(url, '_blank', 'fullscreen=yes,width=1920,height=1080');
    }

    // Handle browser back/forward
    window.addEventListener('popstate', function(event) {
      if (event.state && event.state.page) {
        loadPage(event.state.page, event.state.title);
      }
    });

    // Parse URL and load initial page
    function initializePage() {
      const urlParams = new URLSearchParams(window.location.search);
      const page = urlParams.get('page') || 'home';
      const pageTitle = getPageTitle(page);

      loadPage(page, pageTitle);
    }

    // Get title for page
    function getPageTitle(page) {
      const titles = {
        'home': 'Home',
        'MD': 'Map Visualization',
        'dashboard': 'Dashboard',
        'reports': 'Reports',
        'analytics': 'Analytics',
        'settings': 'Settings',
        'help': 'Help'
      };
      return titles[page] || page.charAt(0).toUpperCase() + page.slice(1);
    }

    // Initialize on load
    window.addEventListener('load', initializePage);

    // Handle sidebar clicks outside (for mobile)
    document.addEventListener('click', function(event) {
      const sidebar = document.getElementById('sidebar');
      const isClickInsideSidebar = sidebar.contains(event.target);
      const isMenuButton = event.target.closest('.header-btn');

      if (!isClickInsideSidebar && !isMenuButton && window.innerWidth <= 768) {
        sidebar.classList.remove('show');
      }
    });
  </script>
</body>
</html>
